<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
    <meta charset="utf-8">
    <meta name="generator" content="quarto-1.6.39">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


    <title>practice</title>
    <style>
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      div.columns{display: flex; gap: min(4vw, 1.5em);}
      div.column{flex: auto; overflow-x: auto;}
      div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
      ul.task-list{list-style: none;}
      ul.task-list li input[type="checkbox"] {
        width: 0.8em;
        margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
        vertical-align: middle;
      }
      /* CSS for syntax highlighting */
      pre > code.sourceCode { white-space: pre; position: relative; }
      pre > code.sourceCode > span { line-height: 1.25; }
      pre > code.sourceCode > span:empty { height: 1.2em; }
      .sourceCode { overflow: visible; }
      code.sourceCode > span { color: inherit; text-decoration: inherit; }
      div.sourceCode { margin: 1em 0; }
      pre.sourceCode { margin: 0; }
      @media screen {
      div.sourceCode { overflow: auto; }
      }
      @media print {
      pre > code.sourceCode { white-space: pre-wrap; }
      pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
      }
      pre.numberSource code
        { counter-reset: source-line 0; }
      pre.numberSource code > span
        { position: relative; left: -4em; counter-increment: source-line; }
      pre.numberSource code > span > a:first-child::before
        { content: counter(source-line);
          position: relative; left: -1em; text-align: right; vertical-align: baseline;
          border: none; display: inline-block;
          -webkit-touch-callout: none; -webkit-user-select: none;
          -khtml-user-select: none; -moz-user-select: none;
          -ms-user-select: none; user-select: none;
          padding: 0 4px; width: 4em;
        }
      pre.numberSource { margin-left: 3em;  padding-left: 4px; }
      div.sourceCode
        {   }
      @media screen {
      pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
      }
    </style>

    <style>
      body.hypothesis-enabled #quarto-embed-header {
        padding-right: 36px;
      }

      #quarto-embed-header {
        height: 3em;
        width: 100%;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: solid 1px;
      }

      #quarto-embed-header h6 {
        font-size: 1.1em;
        padding-top: 0.6em;
        margin-left: 1em;
        margin-right: 1em;
        font-weight: 400;
      }

      #quarto-embed-header a.quarto-back-link,
      #quarto-embed-header a.quarto-download-embed {
        font-size: 0.8em;
        margin-top: 1em;
        margin-bottom: 1em;
        margin-left: 1em;
        margin-right: 1em;
      }

      .quarto-back-container {
        padding-left: 0.5em;
        display: flex;
      }

      .headroom {
          will-change: transform;
          transition: transform 200ms linear;
      }

      .headroom--pinned {
          transform: translateY(0%);
      }

      .headroom--unpinned {
          transform: translateY(-100%);
      }      
    </style>

    <script>
    window.document.addEventListener("DOMContentLoaded", function () {

      var header = window.document.querySelector("#quarto-embed-header");
      const titleBannerEl = window.document.querySelector("body > #title-block-header");
      if (titleBannerEl) {
        titleBannerEl.style.paddingTop = header.clientHeight + "px";
      }
      const contentEl = window.document.getElementById('quarto-content');
      for (const child of contentEl.children) {
        child.style.paddingTop = header.clientHeight + "px";
        child.style.marginTop = "1em";
      }

      // Use the article root if the `back` call doesn't work. This isn't perfect
      // but should typically work
      window.quartoBackToArticle = () => {
        var currentUrl = window.location.href;
        window.history.back();
        setTimeout(() => {
            // if location was not changed in 100 ms, then there is no history back
            if(currentUrl === window.location.href){              
                // redirect to site root
                window.location.href = '/';
            }
        }, 100);
      }

      const headroom = new window.Headroom(header, {
        tolerance: 5,
        onPin: function () {
        },
        onUnpin: function () {
        },
      });
      headroom.init();
    });
    </script>

    
<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap-e5ae1fc492682bfadee4b1303fea6dfb.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
     <script id="quarto-search-options" type="application/json">{
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>  
        <link rel="stylesheet" href="../../../styles/index.css">
      </head>

  <body class="floating nav-fixed quarto-notebook">
    <div id="quarto-embed-header" class="headroom fixed-top bg-primary">
      
      <a onclick="window.quartoBackToArticle(); return false;" class="btn btn-primary quarto-back-link"><i class="bi bi-caret-left"></i> Back to Article</a>
      <h6><i class="bi bi-journal-code"></i> Original dataframe</h6>

            <a href="../../../labs/Practice/practice2/practice.ipynb" class="btn btn-primary quarto-download-embed" download="practice.ipynb">Download Notebook</a>
          </div>

     <div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../index.html"> 
<span class="menu-text">Index</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../about.html"> 
<span class="menu-text">About Me</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../homework.html"> 
<span class="menu-text">Homework</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../labs.html"> 
<span class="menu-text">Labs</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../practice.html"> 
<span class="menu-text">Practice</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/LiuYuting208/homework-C-group"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block"></header>    <div class="cell-container"><div class="cell-decorator"><pre>In [1]:</pre></div><div id="cell-0" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib <span class="im">as</span> mpl</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pathlib <span class="im">import</span> Path</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pingouin <span class="im">as</span> pg</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> lets_plot <span class="im">import</span> <span class="op">*</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>LetsPlot.setup_html(no_js<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [2]:</pre></div><div id="cell-1" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>plt.style.use(</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://raw.githubusercontent.com/aeturrell/core_python/main/plot_style.txt"</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div>
<div id="cell-2" class="cell markdown">
<p>Part 2.1 Collecting data by playing a public goods game</p>
</div>
<div class="cell-container"><div class="cell-decorator"><pre>In [3]:</pre></div><div id="cell-3" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>rounds <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>]</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>average_contributions <span class="op">=</span> [<span class="fl">56.3</span>, <span class="fl">53.1</span>, <span class="fl">42.8</span>, <span class="fl">59.1</span>, <span class="fl">73.3</span>, <span class="fl">48.6</span>, <span class="fl">64.1</span>, <span class="fl">45.5</span>, <span class="dv">66</span>, <span class="fl">52.6</span>]</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>plt.plot(rounds, average_contributions, marker<span class="op">=</span><span class="st">'o'</span>, color<span class="op">=</span><span class="st">'blue'</span>, label<span class="op">=</span><span class="st">'平均贡献'</span>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"每回合的平均贡献变化趋势"</span>, fontsize<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"回合 (Round)"</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"平均贡献 (Average Contribution)"</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>plt.xticks(rounds)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>, linestyle<span class="op">=</span><span class="st">'--'</span>, alpha<span class="op">=</span><span class="fl">0.7</span>)</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\1210218896.py:12: UserWarning: Glyph 22238 (\N{CJK UNIFIED IDEOGRAPH-56DE}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\1210218896.py:12: UserWarning: Glyph 21512 (\N{CJK UNIFIED IDEOGRAPH-5408}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\1210218896.py:12: UserWarning: Glyph 24179 (\N{CJK UNIFIED IDEOGRAPH-5E73}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\1210218896.py:12: UserWarning: Glyph 22343 (\N{CJK UNIFIED IDEOGRAPH-5747}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\1210218896.py:12: UserWarning: Glyph 36129 (\N{CJK UNIFIED IDEOGRAPH-8D21}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\1210218896.py:12: UserWarning: Glyph 29486 (\N{CJK UNIFIED IDEOGRAPH-732E}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\1210218896.py:12: UserWarning: Glyph 27599 (\N{CJK UNIFIED IDEOGRAPH-6BCF}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\1210218896.py:12: UserWarning: Glyph 30340 (\N{CJK UNIFIED IDEOGRAPH-7684}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\1210218896.py:12: UserWarning: Glyph 21464 (\N{CJK UNIFIED IDEOGRAPH-53D8}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\1210218896.py:12: UserWarning: Glyph 21270 (\N{CJK UNIFIED IDEOGRAPH-5316}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\1210218896.py:12: UserWarning: Glyph 36235 (\N{CJK UNIFIED IDEOGRAPH-8D8B}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\1210218896.py:12: UserWarning: Glyph 21183 (\N{CJK UNIFIED IDEOGRAPH-52BF}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 24179 (\N{CJK UNIFIED IDEOGRAPH-5E73}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 22343 (\N{CJK UNIFIED IDEOGRAPH-5747}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 36129 (\N{CJK UNIFIED IDEOGRAPH-8D21}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 29486 (\N{CJK UNIFIED IDEOGRAPH-732E}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 27599 (\N{CJK UNIFIED IDEOGRAPH-6BCF}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 22238 (\N{CJK UNIFIED IDEOGRAPH-56DE}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 21512 (\N{CJK UNIFIED IDEOGRAPH-5408}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 30340 (\N{CJK UNIFIED IDEOGRAPH-7684}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 21464 (\N{CJK UNIFIED IDEOGRAPH-53D8}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 21270 (\N{CJK UNIFIED IDEOGRAPH-5316}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 36235 (\N{CJK UNIFIED IDEOGRAPH-8D8B}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 21183 (\N{CJK UNIFIED IDEOGRAPH-52BF}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)</code></pre>
</div>
<div class="cell-output cell-output-display">
<div class="">
<figure class="figure">
<p class=""><img src="practice_files/figure-html/cell-4-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div></div>
<div id="cell-4" class="cell markdown">
<p>Python walk-through 2.1</p>
</div>
<div id="cell-5" class="cell markdown">
<p>Compare your line chart with Figure 3 of Herrmann et al.&nbsp;(2008).1 Comment on any similarities or differences between the results (for example, the amount contributed at the start and end, or the change in average contributions over the course of the game).</p>
</div>
<div id="cell-6" class="cell markdown">
<p>Can you think of any reasons why your results are similar to (or different from) those in Figure 3? You may find it helpful to read the ‘Experiments’ section of the Herrmann et al.&nbsp;(2008) study for a more detailed description of how the experiments were conducted.</p>
</div>
<div id="cell-7" class="cell markdown">
<p>Part 2.2 Describing the data</p>
</div>
<div class="cell-container"><div class="cell-decorator"><pre>In [4]:</pre></div><div id="cell-8" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>data_np <span class="op">=</span> pd.read_excel(</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"doing-economics-datafile-working-in-excel-project-2.xlsx"</span>,</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    usecols<span class="op">=</span><span class="st">"A:Q"</span>,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    header<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    index_col<span class="op">=</span><span class="st">"Period"</span>,</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>data_n <span class="op">=</span> data_np.iloc[:<span class="dv">10</span>, :].copy()</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>data_p <span class="op">=</span> data_np.iloc[<span class="dv">14</span>:<span class="dv">24</span>, :].copy()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>d:\python\Lib\site-packages\openpyxl\worksheet\_reader.py:329: UserWarning: Unknown extension is not supported and will be removed
  warn(msg)</code></pre>
</div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [5]:</pre></div><div id="cell-9" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>test_data <span class="op">=</span> {</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"City A"</span>: [<span class="fl">14.1</span>, <span class="fl">14.1</span>, <span class="fl">13.7</span>],</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"City B"</span>: [<span class="fl">11.0</span>, <span class="fl">12.6</span>, <span class="fl">12.1</span>],</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Original dataframe</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>test_df <span class="op">=</span> pd.DataFrame.from_dict(test_data)</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co"># A copy of the dataframe</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>test_copy <span class="op">=</span> test_df.copy()</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="co"># A pointer to the dataframe</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>test_pointer <span class="op">=</span> test_df</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>test_pointer.iloc[<span class="dv">1</span>, <span class="dv">1</span>] <span class="op">=</span> <span class="dv">99</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [6]:</pre></div><div id="cell-10" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"test_df="</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>test_df<span class="sc">}</span><span class="ch">\n</span><span class="ss">"</span>)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"test_copy="</span>)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>test_copy<span class="sc">}</span><span class="ch">\n</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>test_df=
   City A  City B
0    14.1    11.0
1    14.1    99.0
2    13.7    12.1

test_copy=
   City A  City B
0    14.1    11.0
1    14.1    12.6
2    13.7    12.1
</code></pre>
</div>
</div></div>
<div id="cell-11" class="cell markdown">
<p>Using the data for Figures 2A and 3 of Herrmann et al.&nbsp;(2008): Calculate the mean contribution in each period (row) separately for both experiments. Plot a line chart of mean contribution on the vertical axis and time period (from 1 to 10) on the horizontal axis (with a separate line for each experiment). Make sure the lines in the legend are clearly labelled according to the experiment (with punishment or without punishment). Describe any differences and similarities you see in the mean contribution over time in both experiments.</p>
</div>
<div class="cell-container"><div class="cell-decorator"><pre>In [7]:</pre></div><div id="cell-12" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>data_without_punishment <span class="op">=</span> {</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Period"</span>: [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>],</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Copenhagen"</span>: [<span class="fl">14.102941176470589</span>, <span class="fl">14.132352941176471</span>, <span class="fl">13.720588235294118</span>, <span class="fl">12.897058823529411</span>, <span class="fl">12.338235294117647</span>, <span class="fl">11.676470588235293</span>, <span class="fl">10.779411764705882</span>, <span class="fl">10.632352941176471</span>, <span class="fl">9.764705882352942</span>, <span class="fl">5.294117647058823</span>],</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Dnipropetrovs’k"</span>: [<span class="fl">10.954545272727273</span>, <span class="fl">12.636363454545455</span>, <span class="fl">12.068181636363636</span>, <span class="fl">11.181818</span>, <span class="fl">11.272727454545453</span>, <span class="fl">10.477272545454547</span>, <span class="fl">9.454545272727273</span>, <span class="fl">10.340909272727272</span>, <span class="fl">9.022727272727273</span>, <span class="fl">8.681818181818182</span>],</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Minsk"</span>: [<span class="fl">12.7941</span>, <span class="fl">12.3382</span>, <span class="fl">12.5882</span>, <span class="fl">12.2647</span>, <span class="fl">11.8235</span>, <span class="fl">9.88235</span>, <span class="fl">9.88235</span>, <span class="fl">8.42647</span>, <span class="fl">8.26471</span>, <span class="fl">6.94118</span>],</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"St. Gallen"</span>: [<span class="fl">13.6875</span>, <span class="fl">12.80206675</span>, <span class="fl">12.354183500000001</span>, <span class="fl">10.60418325</span>, <span class="fl">10.989583249999999</span>, <span class="fl">10.70831675</span>, <span class="fl">10.14581675</span>, <span class="fl">9.510415</span>, <span class="fl">7.37499825</span>, <span class="fl">2.97916825</span>],</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="co"># 带惩罚的贡献数据 (Figure 2A)</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>data_with_punishment <span class="op">=</span> {</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Period"</span>: [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>],</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Copenhagen"</span>: [<span class="fl">15.411765098571777</span>, <span class="fl">16.97058868408203</span>, <span class="fl">17.735294342041016</span>, <span class="fl">18.16176414489746</span>, <span class="fl">18.367647171020508</span>, <span class="fl">18.691177368164062</span>, <span class="fl">18.735294342041016</span>, <span class="fl">18.323530197143555</span>, <span class="fl">18.073530197143555</span>, <span class="fl">17.014705657958984</span>],</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Dnipropetrovs’k"</span>: [<span class="fl">9.477272987365723</span>, <span class="fl">9.909090995788574</span>, <span class="fl">11.840909004211426</span>, <span class="fl">11.454545021057129</span>, <span class="fl">12.681818008422852</span>, <span class="fl">11.75</span>, <span class="fl">11.227272987365723</span>, <span class="fl">10.681818008422852</span>, <span class="fl">9.704545021057129</span>, <span class="fl">10.068181991577148</span>],</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Minsk"</span>: [<span class="fl">11.75</span>, <span class="fl">13.235294342041016</span>, <span class="fl">12.897058486938477</span>, <span class="fl">13.382352828979492</span>, <span class="fl">13.970588684082031</span>, <span class="fl">13.014705657958984</span>, <span class="fl">13.176470756530762</span>, <span class="fl">13.691176414489746</span>, <span class="fl">12.411765098571777</span>, <span class="fl">11.70588207244873</span>],</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>    <span class="st">"St. Gallen"</span>: [<span class="fl">15.041666984558105</span>, <span class="fl">16.71875</span>, <span class="fl">17.57291603088379</span>, <span class="fl">17.42708396911621</span>, <span class="fl">17.64583396911621</span>, <span class="fl">17.34375</span>, <span class="fl">16.79166603088379</span>, <span class="fl">16.75</span>, <span class="fl">16.88541603088379</span>, <span class="fl">15.15625</span>],</span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 其余城市数据省略，但可以按照同样格式添加</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a><span class="co"># 转换为DataFrame</span></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>df_without_punishment <span class="op">=</span> pd.DataFrame(data_without_punishment)</span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a>df_with_punishment <span class="op">=</span> pd.DataFrame(data_with_punishment)</span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a><span class="co"># 计算每个时间段的平均贡献值</span></span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a>df_without_punishment[<span class="st">"Mean Contribution"</span>] <span class="op">=</span> df_without_punishment.iloc[:, <span class="dv">1</span>:].mean(axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a>df_with_punishment[<span class="st">"Mean Contribution"</span>] <span class="op">=</span> df_with_punishment.iloc[:, <span class="dv">1</span>:].mean(axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a><span class="co"># 绘制折线图</span></span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a>plt.plot(df_without_punishment[<span class="st">"Period"</span>], df_without_punishment[<span class="st">"Mean Contribution"</span>], label<span class="op">=</span><span class="st">"不带惩罚"</span>, color<span class="op">=</span><span class="st">"blue"</span>, marker<span class="op">=</span><span class="st">'o'</span>)</span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a>plt.plot(df_with_punishment[<span class="st">"Period"</span>], df_with_punishment[<span class="st">"Mean Contribution"</span>], label<span class="op">=</span><span class="st">"带惩罚"</span>, color<span class="op">=</span><span class="st">"red"</span>, marker<span class="op">=</span><span class="st">'o'</span>)</span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a><span class="co"># 添加图例、标题和轴标签</span></span>
<span id="cb10-37"><a href="#cb10-37" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"平均贡献随时间的变化趋势"</span>, fontsize<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb10-38"><a href="#cb10-38" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"时间段 (Period)"</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb10-39"><a href="#cb10-39" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"平均贡献 (Mean Contribution)"</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb10-40"><a href="#cb10-40" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb10-41"><a href="#cb10-41" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>, linestyle<span class="op">=</span><span class="st">'--'</span>, alpha<span class="op">=</span><span class="fl">0.7</span>)</span>
<span id="cb10-42"><a href="#cb10-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-43"><a href="#cb10-43" aria-hidden="true" tabindex="-1"></a><span class="co"># 显示图形</span></span>
<span id="cb10-44"><a href="#cb10-44" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb10-45"><a href="#cb10-45" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\199332846.py:44: UserWarning: Glyph 26102 (\N{CJK UNIFIED IDEOGRAPH-65F6}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\199332846.py:44: UserWarning: Glyph 38388 (\N{CJK UNIFIED IDEOGRAPH-95F4}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\199332846.py:44: UserWarning: Glyph 27573 (\N{CJK UNIFIED IDEOGRAPH-6BB5}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\199332846.py:44: UserWarning: Glyph 24179 (\N{CJK UNIFIED IDEOGRAPH-5E73}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\199332846.py:44: UserWarning: Glyph 22343 (\N{CJK UNIFIED IDEOGRAPH-5747}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\199332846.py:44: UserWarning: Glyph 36129 (\N{CJK UNIFIED IDEOGRAPH-8D21}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\199332846.py:44: UserWarning: Glyph 29486 (\N{CJK UNIFIED IDEOGRAPH-732E}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\199332846.py:44: UserWarning: Glyph 38543 (\N{CJK UNIFIED IDEOGRAPH-968F}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\199332846.py:44: UserWarning: Glyph 30340 (\N{CJK UNIFIED IDEOGRAPH-7684}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\199332846.py:44: UserWarning: Glyph 21464 (\N{CJK UNIFIED IDEOGRAPH-53D8}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\199332846.py:44: UserWarning: Glyph 21270 (\N{CJK UNIFIED IDEOGRAPH-5316}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\199332846.py:44: UserWarning: Glyph 36235 (\N{CJK UNIFIED IDEOGRAPH-8D8B}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\199332846.py:44: UserWarning: Glyph 21183 (\N{CJK UNIFIED IDEOGRAPH-52BF}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\199332846.py:44: UserWarning: Glyph 19981 (\N{CJK UNIFIED IDEOGRAPH-4E0D}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\199332846.py:44: UserWarning: Glyph 24102 (\N{CJK UNIFIED IDEOGRAPH-5E26}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\199332846.py:44: UserWarning: Glyph 24809 (\N{CJK UNIFIED IDEOGRAPH-60E9}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\199332846.py:44: UserWarning: Glyph 32602 (\N{CJK UNIFIED IDEOGRAPH-7F5A}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 24179 (\N{CJK UNIFIED IDEOGRAPH-5E73}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 22343 (\N{CJK UNIFIED IDEOGRAPH-5747}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 36129 (\N{CJK UNIFIED IDEOGRAPH-8D21}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 29486 (\N{CJK UNIFIED IDEOGRAPH-732E}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 38543 (\N{CJK UNIFIED IDEOGRAPH-968F}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 26102 (\N{CJK UNIFIED IDEOGRAPH-65F6}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 38388 (\N{CJK UNIFIED IDEOGRAPH-95F4}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 30340 (\N{CJK UNIFIED IDEOGRAPH-7684}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 21464 (\N{CJK UNIFIED IDEOGRAPH-53D8}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 21270 (\N{CJK UNIFIED IDEOGRAPH-5316}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 36235 (\N{CJK UNIFIED IDEOGRAPH-8D8B}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 21183 (\N{CJK UNIFIED IDEOGRAPH-52BF}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 27573 (\N{CJK UNIFIED IDEOGRAPH-6BB5}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 19981 (\N{CJK UNIFIED IDEOGRAPH-4E0D}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 24102 (\N{CJK UNIFIED IDEOGRAPH-5E26}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 24809 (\N{CJK UNIFIED IDEOGRAPH-60E9}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 32602 (\N{CJK UNIFIED IDEOGRAPH-7F5A}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)</code></pre>
</div>
<div class="cell-output cell-output-display">
<div class="">
<figure class="figure">
<p class=""><img src="practice_files/figure-html/cell-8-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div></div>
<div id="cell-13" class="cell markdown">
<p>Python walk-through 2.3</p>
</div>
<div class="cell-container"><div class="cell-decorator"><pre>In [8]:</pre></div><div id="cell-14" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>mean_n_c <span class="op">=</span> data_n.mean(axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>mean_p_c <span class="op">=</span> data_p.agg(np.mean, axis<span class="op">=</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\3801786469.py:2: FutureWarning: The provided callable &lt;function mean at 0x000001F67EA03560&gt; is currently using DataFrame.mean. In a future version of pandas, the provided callable will be used directly. To keep current behavior pass the string "mean" instead.
  mean_p_c = data_p.agg(np.mean, axis=1)</code></pre>
</div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [9]:</pre></div><div id="cell-15" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>mean_n_c.plot(ax<span class="op">=</span>ax, label<span class="op">=</span><span class="st">"Without punishment"</span>)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>mean_p_c.plot(ax<span class="op">=</span>ax, label<span class="op">=</span><span class="st">"With punishment"</span>)</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">"Average contributions to the public goods game"</span>)</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Average contribution"</span>)</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>ax.legend()<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div class="">
<figure class="figure">
<p class=""><img src="practice_files/figure-html/cell-10-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div></div>
<div id="cell-16" class="cell markdown">
<p>2.Instead of looking at all periods, we can focus on contributions in the first and last period. Plot a column chart showing the mean contribution in the first and last period for both experiments.</p>
</div>
<div class="cell-container"><div class="cell-decorator"><pre>In [10]:</pre></div><div id="cell-17" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 数据输入</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 不带惩罚的贡献数据 (Figure 3)</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>data_without_punishment <span class="op">=</span> {</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Period"</span>: [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>],</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Copenhagen"</span>: [<span class="fl">14.102941176470589</span>, <span class="fl">14.132352941176471</span>, <span class="fl">13.720588235294118</span>, <span class="fl">12.897058823529411</span>, <span class="fl">12.338235294117647</span>, <span class="fl">11.676470588235293</span>, <span class="fl">10.779411764705882</span>, <span class="fl">10.632352941176471</span>, <span class="fl">9.764705882352942</span>, <span class="fl">5.294117647058823</span>],</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Dnipropetrovs’k"</span>: [<span class="fl">10.954545272727273</span>, <span class="fl">12.636363454545455</span>, <span class="fl">12.068181636363636</span>, <span class="fl">11.181818</span>, <span class="fl">11.272727454545453</span>, <span class="fl">10.477272545454547</span>, <span class="fl">9.454545272727273</span>, <span class="fl">10.340909272727272</span>, <span class="fl">9.022727272727273</span>, <span class="fl">8.681818181818182</span>],</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Minsk"</span>: [<span class="fl">12.7941</span>, <span class="fl">12.3382</span>, <span class="fl">12.5882</span>, <span class="fl">12.2647</span>, <span class="fl">11.8235</span>, <span class="fl">9.88235</span>, <span class="fl">9.88235</span>, <span class="fl">8.42647</span>, <span class="fl">8.26471</span>, <span class="fl">6.94118</span>],</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"St. Gallen"</span>: [<span class="fl">13.6875</span>, <span class="fl">12.80206675</span>, <span class="fl">12.354183500000001</span>, <span class="fl">10.60418325</span>, <span class="fl">10.989583249999999</span>, <span class="fl">10.70831675</span>, <span class="fl">10.14581675</span>, <span class="fl">9.510415</span>, <span class="fl">7.37499825</span>, <span class="fl">2.97916825</span>],</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a><span class="co"># 带惩罚的贡献数据 (Figure 2A)</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>data_with_punishment <span class="op">=</span> {</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Period"</span>: [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>],</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Copenhagen"</span>: [<span class="fl">15.411765098571777</span>, <span class="fl">16.97058868408203</span>, <span class="fl">17.735294342041016</span>, <span class="fl">18.16176414489746</span>, <span class="fl">18.367647171020508</span>, <span class="fl">18.691177368164062</span>, <span class="fl">18.735294342041016</span>, <span class="fl">18.323530197143555</span>, <span class="fl">18.073530197143555</span>, <span class="fl">17.014705657958984</span>],</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Dnipropetrovs’k"</span>: [<span class="fl">9.477272987365723</span>, <span class="fl">9.909090995788574</span>, <span class="fl">11.840909004211426</span>, <span class="fl">11.454545021057129</span>, <span class="fl">12.681818008422852</span>, <span class="fl">11.75</span>, <span class="fl">11.227272987365723</span>, <span class="fl">10.681818008422852</span>, <span class="fl">9.704545021057129</span>, <span class="fl">10.068181991577148</span>],</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Minsk"</span>: [<span class="fl">11.75</span>, <span class="fl">13.235294342041016</span>, <span class="fl">12.897058486938477</span>, <span class="fl">13.382352828979492</span>, <span class="fl">13.970588684082031</span>, <span class="fl">13.014705657958984</span>, <span class="fl">13.176470756530762</span>, <span class="fl">13.691176414489746</span>, <span class="fl">12.411765098571777</span>, <span class="fl">11.70588207244873</span>],</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>    <span class="st">"St. Gallen"</span>: [<span class="fl">15.041666984558105</span>, <span class="fl">16.71875</span>, <span class="fl">17.57291603088379</span>, <span class="fl">17.42708396911621</span>, <span class="fl">17.64583396911621</span>, <span class="fl">17.34375</span>, <span class="fl">16.79166603088379</span>, <span class="fl">16.75</span>, <span class="fl">16.88541603088379</span>, <span class="fl">15.15625</span>],</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a><span class="co"># 转换为DataFrame</span></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>df_without_punishment <span class="op">=</span> pd.DataFrame(data_without_punishment)</span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>df_with_punishment <span class="op">=</span> pd.DataFrame(data_with_punishment)</span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a><span class="co"># 计算第1期和第10期的平均贡献值</span></span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a>mean_without_punishment_first <span class="op">=</span> df_without_punishment.iloc[<span class="dv">0</span>, <span class="dv">1</span>:].mean()</span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a>mean_without_punishment_last <span class="op">=</span> df_without_punishment.iloc[<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>:].mean()</span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a>mean_with_punishment_first <span class="op">=</span> df_with_punishment.iloc[<span class="dv">0</span>, <span class="dv">1</span>:].mean()</span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a>mean_with_punishment_last <span class="op">=</span> df_with_punishment.iloc[<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>:].mean()</span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a><span class="co"># 准备柱状图数据</span></span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a>categories <span class="op">=</span> [<span class="st">'第1期'</span>, <span class="st">'第10期'</span>]</span>
<span id="cb15-35"><a href="#cb15-35" aria-hidden="true" tabindex="-1"></a>mean_without_punishment <span class="op">=</span> [mean_without_punishment_first, mean_without_punishment_last]</span>
<span id="cb15-36"><a href="#cb15-36" aria-hidden="true" tabindex="-1"></a>mean_with_punishment <span class="op">=</span> [mean_with_punishment_first, mean_with_punishment_last]</span>
<span id="cb15-37"><a href="#cb15-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-38"><a href="#cb15-38" aria-hidden="true" tabindex="-1"></a><span class="co"># 绘制柱状图</span></span>
<span id="cb15-39"><a href="#cb15-39" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="bu">range</span>(<span class="bu">len</span>(categories))</span>
<span id="cb15-40"><a href="#cb15-40" aria-hidden="true" tabindex="-1"></a>width <span class="op">=</span> <span class="fl">0.35</span>  <span class="co"># 柱宽</span></span>
<span id="cb15-41"><a href="#cb15-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-42"><a href="#cb15-42" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">6</span>))</span>
<span id="cb15-43"><a href="#cb15-43" aria-hidden="true" tabindex="-1"></a>plt.bar(x, mean_without_punishment, width<span class="op">=</span>width, label<span class="op">=</span><span class="st">'不带惩罚'</span>, color<span class="op">=</span><span class="st">'blue'</span>, alpha<span class="op">=</span><span class="fl">0.7</span>)</span>
<span id="cb15-44"><a href="#cb15-44" aria-hidden="true" tabindex="-1"></a>plt.bar([i <span class="op">+</span> width <span class="cf">for</span> i <span class="kw">in</span> x], mean_with_punishment, width<span class="op">=</span>width, label<span class="op">=</span><span class="st">'带惩罚'</span>, color<span class="op">=</span><span class="st">'red'</span>, alpha<span class="op">=</span><span class="fl">0.7</span>)</span>
<span id="cb15-45"><a href="#cb15-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-46"><a href="#cb15-46" aria-hidden="true" tabindex="-1"></a><span class="co"># 添加标签和图例</span></span>
<span id="cb15-47"><a href="#cb15-47" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'时间段'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb15-48"><a href="#cb15-48" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'平均贡献'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb15-49"><a href="#cb15-49" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'第1期和第10期的平均贡献比较'</span>, fontsize<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb15-50"><a href="#cb15-50" aria-hidden="true" tabindex="-1"></a>plt.xticks([i <span class="op">+</span> width <span class="op">/</span> <span class="dv">2</span> <span class="cf">for</span> i <span class="kw">in</span> x], categories)</span>
<span id="cb15-51"><a href="#cb15-51" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb15-52"><a href="#cb15-52" aria-hidden="true" tabindex="-1"></a>plt.grid(axis<span class="op">=</span><span class="st">'y'</span>, linestyle<span class="op">=</span><span class="st">'--'</span>, alpha<span class="op">=</span><span class="fl">0.7</span>)</span>
<span id="cb15-53"><a href="#cb15-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-54"><a href="#cb15-54" aria-hidden="true" tabindex="-1"></a><span class="co"># 显示图形</span></span>
<span id="cb15-55"><a href="#cb15-55" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb15-56"><a href="#cb15-56" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\3182344201.py:55: UserWarning: Glyph 31532 (\N{CJK UNIFIED IDEOGRAPH-7B2C}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\3182344201.py:55: UserWarning: Glyph 26399 (\N{CJK UNIFIED IDEOGRAPH-671F}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\3182344201.py:55: UserWarning: Glyph 26102 (\N{CJK UNIFIED IDEOGRAPH-65F6}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\3182344201.py:55: UserWarning: Glyph 38388 (\N{CJK UNIFIED IDEOGRAPH-95F4}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\3182344201.py:55: UserWarning: Glyph 27573 (\N{CJK UNIFIED IDEOGRAPH-6BB5}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\3182344201.py:55: UserWarning: Glyph 24179 (\N{CJK UNIFIED IDEOGRAPH-5E73}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\3182344201.py:55: UserWarning: Glyph 22343 (\N{CJK UNIFIED IDEOGRAPH-5747}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\3182344201.py:55: UserWarning: Glyph 36129 (\N{CJK UNIFIED IDEOGRAPH-8D21}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\3182344201.py:55: UserWarning: Glyph 29486 (\N{CJK UNIFIED IDEOGRAPH-732E}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\3182344201.py:55: UserWarning: Glyph 21644 (\N{CJK UNIFIED IDEOGRAPH-548C}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\3182344201.py:55: UserWarning: Glyph 30340 (\N{CJK UNIFIED IDEOGRAPH-7684}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\3182344201.py:55: UserWarning: Glyph 27604 (\N{CJK UNIFIED IDEOGRAPH-6BD4}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\3182344201.py:55: UserWarning: Glyph 36739 (\N{CJK UNIFIED IDEOGRAPH-8F83}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\3182344201.py:55: UserWarning: Glyph 19981 (\N{CJK UNIFIED IDEOGRAPH-4E0D}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\3182344201.py:55: UserWarning: Glyph 24102 (\N{CJK UNIFIED IDEOGRAPH-5E26}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\3182344201.py:55: UserWarning: Glyph 24809 (\N{CJK UNIFIED IDEOGRAPH-60E9}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Local\Temp\ipykernel_21296\3182344201.py:55: UserWarning: Glyph 32602 (\N{CJK UNIFIED IDEOGRAPH-7F5A}) missing from font(s) STIXGeneral.
  plt.tight_layout()
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 24179 (\N{CJK UNIFIED IDEOGRAPH-5E73}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 22343 (\N{CJK UNIFIED IDEOGRAPH-5747}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 36129 (\N{CJK UNIFIED IDEOGRAPH-8D21}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 29486 (\N{CJK UNIFIED IDEOGRAPH-732E}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 31532 (\N{CJK UNIFIED IDEOGRAPH-7B2C}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 26399 (\N{CJK UNIFIED IDEOGRAPH-671F}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 21644 (\N{CJK UNIFIED IDEOGRAPH-548C}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 30340 (\N{CJK UNIFIED IDEOGRAPH-7684}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 27604 (\N{CJK UNIFIED IDEOGRAPH-6BD4}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 36739 (\N{CJK UNIFIED IDEOGRAPH-8F83}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 26102 (\N{CJK UNIFIED IDEOGRAPH-65F6}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 38388 (\N{CJK UNIFIED IDEOGRAPH-95F4}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 27573 (\N{CJK UNIFIED IDEOGRAPH-6BB5}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 19981 (\N{CJK UNIFIED IDEOGRAPH-4E0D}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 24102 (\N{CJK UNIFIED IDEOGRAPH-5E26}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 24809 (\N{CJK UNIFIED IDEOGRAPH-60E9}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)
C:\Users\q2010\AppData\Roaming\Python\Python313\site-packages\IPython\core\pylabtools.py:170: UserWarning: Glyph 32602 (\N{CJK UNIFIED IDEOGRAPH-7F5A}) missing from font(s) STIXGeneral.
  fig.canvas.print_figure(bytes_io, **kw)</code></pre>
</div>
<div class="cell-output cell-output-display">
<div class="">
<figure class="figure">
<p class=""><img src="practice_files/figure-html/cell-11-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div></div>
<div id="cell-18" class="cell markdown">
<p>Python walk-through 2.4</p>
</div>
<div id="cell-19" class="cell markdown">
<p>3.Using the data for Figures 2A and 3 of Herrmann et al.&nbsp;(2008): Calculate the standard deviation for Periods 1 and 10 separately, for both experiments. Does the rule of thumb apply? (In other words, are most values within two standard deviations of the mean?) As shown in Figure 2.3, the mean contribution for both experiments was 10.6 in Period 1. With reference to your standard deviation calculations, explain whether this means that the two sets of data are the same.</p>
</div>
<div class="cell-container"><div class="cell-decorator"><pre>In [11]:</pre></div><div id="cell-20" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 数据输入</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 不带惩罚的贡献数据 (Figure 3)</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>data_without_punishment <span class="op">=</span> {</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Period"</span>: [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>],</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Copenhagen"</span>: [<span class="fl">14.102941176470589</span>, <span class="fl">14.132352941176471</span>, <span class="fl">13.720588235294118</span>, <span class="fl">12.897058823529411</span>, <span class="fl">12.338235294117647</span>, <span class="fl">11.676470588235293</span>, <span class="fl">10.779411764705882</span>, <span class="fl">10.632352941176471</span>, <span class="fl">9.764705882352942</span>, <span class="fl">5.294117647058823</span>],</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Dnipropetrovs’k"</span>: [<span class="fl">10.954545272727273</span>, <span class="fl">12.636363454545455</span>, <span class="fl">12.068181636363636</span>, <span class="fl">11.181818</span>, <span class="fl">11.272727454545453</span>, <span class="fl">10.477272545454547</span>, <span class="fl">9.454545272727273</span>, <span class="fl">10.340909272727272</span>, <span class="fl">9.022727272727273</span>, <span class="fl">8.681818181818182</span>],</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Minsk"</span>: [<span class="fl">12.7941</span>, <span class="fl">12.3382</span>, <span class="fl">12.5882</span>, <span class="fl">12.2647</span>, <span class="fl">11.8235</span>, <span class="fl">9.88235</span>, <span class="fl">9.88235</span>, <span class="fl">8.42647</span>, <span class="fl">8.26471</span>, <span class="fl">6.94118</span>],</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"St. Gallen"</span>: [<span class="fl">13.6875</span>, <span class="fl">12.80206675</span>, <span class="fl">12.354183500000001</span>, <span class="fl">10.60418325</span>, <span class="fl">10.989583249999999</span>, <span class="fl">10.70831675</span>, <span class="fl">10.14581675</span>, <span class="fl">9.510415</span>, <span class="fl">7.37499825</span>, <span class="fl">2.97916825</span>],</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a><span class="co"># 带惩罚的贡献数据 (Figure 2A)</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>data_with_punishment <span class="op">=</span> {</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Period"</span>: [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>],</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Copenhagen"</span>: [<span class="fl">15.411765098571777</span>, <span class="fl">16.97058868408203</span>, <span class="fl">17.735294342041016</span>, <span class="fl">18.16176414489746</span>, <span class="fl">18.367647171020508</span>, <span class="fl">18.691177368164062</span>, <span class="fl">18.735294342041016</span>, <span class="fl">18.323530197143555</span>, <span class="fl">18.073530197143555</span>, <span class="fl">17.014705657958984</span>],</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Dnipropetrovs’k"</span>: [<span class="fl">9.477272987365723</span>, <span class="fl">9.909090995788574</span>, <span class="fl">11.840909004211426</span>, <span class="fl">11.454545021057129</span>, <span class="fl">12.681818008422852</span>, <span class="fl">11.75</span>, <span class="fl">11.227272987365723</span>, <span class="fl">10.681818008422852</span>, <span class="fl">9.704545021057129</span>, <span class="fl">10.068181991577148</span>],</span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Minsk"</span>: [<span class="fl">11.75</span>, <span class="fl">13.235294342041016</span>, <span class="fl">12.897058486938477</span>, <span class="fl">13.382352828979492</span>, <span class="fl">13.970588684082031</span>, <span class="fl">13.014705657958984</span>, <span class="fl">13.176470756530762</span>, <span class="fl">13.691176414489746</span>, <span class="fl">12.411765098571777</span>, <span class="fl">11.70588207244873</span>],</span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>    <span class="st">"St. Gallen"</span>: [<span class="fl">15.041666984558105</span>, <span class="fl">16.71875</span>, <span class="fl">17.57291603088379</span>, <span class="fl">17.42708396911621</span>, <span class="fl">17.64583396911621</span>, <span class="fl">17.34375</span>, <span class="fl">16.79166603088379</span>, <span class="fl">16.75</span>, <span class="fl">16.88541603088379</span>, <span class="fl">15.15625</span>],</span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a><span class="co"># 转换为DataFrame</span></span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>df_without_punishment <span class="op">=</span> pd.DataFrame(data_without_punishment)</span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>df_with_punishment <span class="op">=</span> pd.DataFrame(data_with_punishment)</span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a><span class="co"># 提取第1期和第10期数据</span></span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a>data_without_punishment_period1 <span class="op">=</span> df_without_punishment.iloc[<span class="dv">0</span>, <span class="dv">1</span>:]</span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a>data_without_punishment_period10 <span class="op">=</span> df_without_punishment.iloc[<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>:]</span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a>data_with_punishment_period1 <span class="op">=</span> df_with_punishment.iloc[<span class="dv">0</span>, <span class="dv">1</span>:]</span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a>data_with_punishment_period10 <span class="op">=</span> df_with_punishment.iloc[<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>:]</span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a><span class="co"># 计算标准差</span></span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a>std_without_punishment_period1 <span class="op">=</span> np.std(data_without_punishment_period1, ddof<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a>std_without_punishment_period10 <span class="op">=</span> np.std(data_without_punishment_period10, ddof<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb17-37"><a href="#cb17-37" aria-hidden="true" tabindex="-1"></a>std_with_punishment_period1 <span class="op">=</span> np.std(data_with_punishment_period1, ddof<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb17-38"><a href="#cb17-38" aria-hidden="true" tabindex="-1"></a>std_with_punishment_period10 <span class="op">=</span> np.std(data_with_punishment_period10, ddof<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb17-39"><a href="#cb17-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-40"><a href="#cb17-40" aria-hidden="true" tabindex="-1"></a><span class="co"># 输出结果</span></span>
<span id="cb17-41"><a href="#cb17-41" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"不带惩罚 - 第1期标准差:"</span>, std_without_punishment_period1)</span>
<span id="cb17-42"><a href="#cb17-42" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"不带惩罚 - 第10期标准差:"</span>, std_without_punishment_period10)</span>
<span id="cb17-43"><a href="#cb17-43" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"带惩罚 - 第1期标准差:"</span>, std_with_punishment_period1)</span>
<span id="cb17-44"><a href="#cb17-44" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"带惩罚 - 第10期标准差:"</span>, std_with_punishment_period10)</span>
<span id="cb17-45"><a href="#cb17-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-46"><a href="#cb17-46" aria-hidden="true" tabindex="-1"></a><span class="co"># 检验“两倍标准差法则”</span></span>
<span id="cb17-47"><a href="#cb17-47" aria-hidden="true" tabindex="-1"></a>mean_contribution <span class="op">=</span> <span class="fl">10.6</span>  <span class="co"># 示例中给出的平均贡献</span></span>
<span id="cb17-48"><a href="#cb17-48" aria-hidden="true" tabindex="-1"></a>range_without_punishment_period1 <span class="op">=</span> (mean_contribution <span class="op">-</span> <span class="dv">2</span> <span class="op">*</span> std_without_punishment_period1, mean_contribution <span class="op">+</span> <span class="dv">2</span> <span class="op">*</span> std_without_punishment_period1)</span>
<span id="cb17-49"><a href="#cb17-49" aria-hidden="true" tabindex="-1"></a>range_with_punishment_period1 <span class="op">=</span> (mean_contribution <span class="op">-</span> <span class="dv">2</span> <span class="op">*</span> std_with_punishment_period1, mean_contribution <span class="op">+</span> <span class="dv">2</span> <span class="op">*</span> std_with_punishment_period1)</span>
<span id="cb17-50"><a href="#cb17-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-51"><a href="#cb17-51" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"不带惩罚 - 第1期两倍标准差范围:"</span>, range_without_punishment_period1)</span>
<span id="cb17-52"><a href="#cb17-52" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"带惩罚 - 第1期两倍标准差范围:"</span>, range_with_punishment_period1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>不带惩罚 - 第1期标准差: 1.397891866913462
不带惩罚 - 第10期标准差: 2.4289211365445644
带惩罚 - 第1期标准差: 2.824395702863708
带惩罚 - 第10期标准差: 3.1671121545103986
不带惩罚 - 第1期两倍标准差范围: (np.float64(7.804216266173076), np.float64(13.395783733826924))
带惩罚 - 第1期两倍标准差范围: (np.float64(4.951208594272583), np.float64(16.248791405727417))</code></pre>
</div>
</div></div>
<div id="cell-21" class="cell markdown">
<p>4.Calculate the maximum and minimum value for Periods 1 and 10 separately, for both experiments.</p>
</div>
<div class="cell-container"><div class="cell-decorator"><pre>In [12]:</pre></div><div id="cell-22" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 数据输入</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 不带惩罚的贡献数据 (Figure 3)</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>data_without_punishment <span class="op">=</span> {</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Period"</span>: [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>],</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Copenhagen"</span>: [<span class="fl">14.102941176470589</span>, <span class="fl">14.132352941176471</span>, <span class="fl">13.720588235294118</span>, <span class="fl">12.897058823529411</span>, <span class="fl">12.338235294117647</span>, <span class="fl">11.676470588235293</span>, <span class="fl">10.779411764705882</span>, <span class="fl">10.632352941176471</span>, <span class="fl">9.764705882352942</span>, <span class="fl">5.294117647058823</span>],</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Dnipropetrovs’k"</span>: [<span class="fl">10.954545272727273</span>, <span class="fl">12.636363454545455</span>, <span class="fl">12.068181636363636</span>, <span class="fl">11.181818</span>, <span class="fl">11.272727454545453</span>, <span class="fl">10.477272545454547</span>, <span class="fl">9.454545272727273</span>, <span class="fl">10.340909272727272</span>, <span class="fl">9.022727272727273</span>, <span class="fl">8.681818181818182</span>],</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Minsk"</span>: [<span class="fl">12.7941</span>, <span class="fl">12.3382</span>, <span class="fl">12.5882</span>, <span class="fl">12.2647</span>, <span class="fl">11.8235</span>, <span class="fl">9.88235</span>, <span class="fl">9.88235</span>, <span class="fl">8.42647</span>, <span class="fl">8.26471</span>, <span class="fl">6.94118</span>],</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"St. Gallen"</span>: [<span class="fl">13.6875</span>, <span class="fl">12.80206675</span>, <span class="fl">12.354183500000001</span>, <span class="fl">10.60418325</span>, <span class="fl">10.989583249999999</span>, <span class="fl">10.70831675</span>, <span class="fl">10.14581675</span>, <span class="fl">9.510415</span>, <span class="fl">7.37499825</span>, <span class="fl">2.97916825</span>],</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a><span class="co"># 带惩罚的贡献数据 (Figure 2A)</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>data_with_punishment <span class="op">=</span> {</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Period"</span>: [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>],</span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Copenhagen"</span>: [<span class="fl">15.411765098571777</span>, <span class="fl">16.97058868408203</span>, <span class="fl">17.735294342041016</span>, <span class="fl">18.16176414489746</span>, <span class="fl">18.367647171020508</span>, <span class="fl">18.691177368164062</span>, <span class="fl">18.735294342041016</span>, <span class="fl">18.323530197143555</span>, <span class="fl">18.073530197143555</span>, <span class="fl">17.014705657958984</span>],</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Dnipropetrovs’k"</span>: [<span class="fl">9.477272987365723</span>, <span class="fl">9.909090995788574</span>, <span class="fl">11.840909004211426</span>, <span class="fl">11.454545021057129</span>, <span class="fl">12.681818008422852</span>, <span class="fl">11.75</span>, <span class="fl">11.227272987365723</span>, <span class="fl">10.681818008422852</span>, <span class="fl">9.704545021057129</span>, <span class="fl">10.068181991577148</span>],</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Minsk"</span>: [<span class="fl">11.75</span>, <span class="fl">13.235294342041016</span>, <span class="fl">12.897058486938477</span>, <span class="fl">13.382352828979492</span>, <span class="fl">13.970588684082031</span>, <span class="fl">13.014705657958984</span>, <span class="fl">13.176470756530762</span>, <span class="fl">13.691176414489746</span>, <span class="fl">12.411765098571777</span>, <span class="fl">11.70588207244873</span>],</span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>    <span class="st">"St. Gallen"</span>: [<span class="fl">15.041666984558105</span>, <span class="fl">16.71875</span>, <span class="fl">17.57291603088379</span>, <span class="fl">17.42708396911621</span>, <span class="fl">17.64583396911621</span>, <span class="fl">17.34375</span>, <span class="fl">16.79166603088379</span>, <span class="fl">16.75</span>, <span class="fl">16.88541603088379</span>, <span class="fl">15.15625</span>],</span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a><span class="co"># 转换为DataFrame</span></span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>df_without_punishment <span class="op">=</span> pd.DataFrame(data_without_punishment)</span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>df_with_punishment <span class="op">=</span> pd.DataFrame(data_with_punishment)</span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a><span class="co"># 提取第1期和第10期数据</span></span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>data_without_punishment_period1 <span class="op">=</span> df_without_punishment.iloc[<span class="dv">0</span>, <span class="dv">1</span>:]</span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a>data_without_punishment_period10 <span class="op">=</span> df_without_punishment.iloc[<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>:]</span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a>data_with_punishment_period1 <span class="op">=</span> df_with_punishment.iloc[<span class="dv">0</span>, <span class="dv">1</span>:]</span>
<span id="cb19-31"><a href="#cb19-31" aria-hidden="true" tabindex="-1"></a>data_with_punishment_period10 <span class="op">=</span> df_with_punishment.iloc[<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>:]</span>
<span id="cb19-32"><a href="#cb19-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-33"><a href="#cb19-33" aria-hidden="true" tabindex="-1"></a><span class="co"># 计算最大值和最小值</span></span>
<span id="cb19-34"><a href="#cb19-34" aria-hidden="true" tabindex="-1"></a>max_without_punishment_period1 <span class="op">=</span> data_without_punishment_period1.<span class="bu">max</span>()</span>
<span id="cb19-35"><a href="#cb19-35" aria-hidden="true" tabindex="-1"></a>min_without_punishment_period1 <span class="op">=</span> data_without_punishment_period1.<span class="bu">min</span>()</span>
<span id="cb19-36"><a href="#cb19-36" aria-hidden="true" tabindex="-1"></a>max_without_punishment_period10 <span class="op">=</span> data_without_punishment_period10.<span class="bu">max</span>()</span>
<span id="cb19-37"><a href="#cb19-37" aria-hidden="true" tabindex="-1"></a>min_without_punishment_period10 <span class="op">=</span> data_without_punishment_period10.<span class="bu">min</span>()</span>
<span id="cb19-38"><a href="#cb19-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-39"><a href="#cb19-39" aria-hidden="true" tabindex="-1"></a>max_with_punishment_period1 <span class="op">=</span> data_with_punishment_period1.<span class="bu">max</span>()</span>
<span id="cb19-40"><a href="#cb19-40" aria-hidden="true" tabindex="-1"></a>min_with_punishment_period1 <span class="op">=</span> data_with_punishment_period1.<span class="bu">min</span>()</span>
<span id="cb19-41"><a href="#cb19-41" aria-hidden="true" tabindex="-1"></a>max_with_punishment_period10 <span class="op">=</span> data_with_punishment_period10.<span class="bu">max</span>()</span>
<span id="cb19-42"><a href="#cb19-42" aria-hidden="true" tabindex="-1"></a>min_with_punishment_period10 <span class="op">=</span> data_with_punishment_period10.<span class="bu">min</span>()</span>
<span id="cb19-43"><a href="#cb19-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-44"><a href="#cb19-44" aria-hidden="true" tabindex="-1"></a><span class="co"># 输出结果</span></span>
<span id="cb19-45"><a href="#cb19-45" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"不带惩罚 - 第1期最大值:"</span>, max_without_punishment_period1)</span>
<span id="cb19-46"><a href="#cb19-46" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"不带惩罚 - 第1期最小值:"</span>, min_without_punishment_period1)</span>
<span id="cb19-47"><a href="#cb19-47" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"不带惩罚 - 第10期最大值:"</span>, max_without_punishment_period10)</span>
<span id="cb19-48"><a href="#cb19-48" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"不带惩罚 - 第10期最小值:"</span>, min_without_punishment_period10)</span>
<span id="cb19-49"><a href="#cb19-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-50"><a href="#cb19-50" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"带惩罚 - 第1期最大值:"</span>, max_with_punishment_period1)</span>
<span id="cb19-51"><a href="#cb19-51" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"带惩罚 - 第1期最小值:"</span>, min_with_punishment_period1)</span>
<span id="cb19-52"><a href="#cb19-52" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"带惩罚 - 第10期最大值:"</span>, max_with_punishment_period10)</span>
<span id="cb19-53"><a href="#cb19-53" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"带惩罚 - 第10期最小值:"</span>, min_with_punishment_period10)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>不带惩罚 - 第1期最大值: 14.102941176470589
不带惩罚 - 第1期最小值: 10.954545272727273
不带惩罚 - 第10期最大值: 8.681818181818182
不带惩罚 - 第10期最小值: 2.97916825
带惩罚 - 第1期最大值: 15.411765098571777
带惩罚 - 第1期最小值: 9.477272987365723
带惩罚 - 第10期最大值: 17.014705657958984
带惩罚 - 第10期最小值: 10.068181991577148</code></pre>
</div>
</div></div>
<div id="cell-23" class="cell markdown">
<p>5.A concise way to describe the data is in a summary table. With just four numbers (mean, standard deviation, minimum value, maximum value), we can get a general idea of what the data looks like. Create a table of summary statistics that displays mean, variance, standard deviation, minimum, maximum and range for Periods 1 and 10 and for both experiments. Comment on any similarities and differences in the distributions, both across time and across experiments.</p>
</div>
<div class="cell-container"><div class="cell-decorator"><pre>In [13]:</pre></div><div id="cell-24" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 数据输入</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 不带惩罚的贡献数据 (Figure 3)</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>data_without_punishment <span class="op">=</span> {</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Period"</span>: [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>],</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Copenhagen"</span>: [<span class="fl">14.102941176470589</span>, <span class="fl">14.132352941176471</span>, <span class="fl">13.720588235294118</span>, <span class="fl">12.897058823529411</span>, <span class="fl">12.338235294117647</span>, <span class="fl">11.676470588235293</span>, <span class="fl">10.779411764705882</span>, <span class="fl">10.632352941176471</span>, <span class="fl">9.764705882352942</span>, <span class="fl">5.294117647058823</span>],</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Dnipropetrovs’k"</span>: [<span class="fl">10.954545272727273</span>, <span class="fl">12.636363454545455</span>, <span class="fl">12.068181636363636</span>, <span class="fl">11.181818</span>, <span class="fl">11.272727454545453</span>, <span class="fl">10.477272545454547</span>, <span class="fl">9.454545272727273</span>, <span class="fl">10.340909272727272</span>, <span class="fl">9.022727272727273</span>, <span class="fl">8.681818181818182</span>],</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Minsk"</span>: [<span class="fl">12.7941</span>, <span class="fl">12.3382</span>, <span class="fl">12.5882</span>, <span class="fl">12.2647</span>, <span class="fl">11.8235</span>, <span class="fl">9.88235</span>, <span class="fl">9.88235</span>, <span class="fl">8.42647</span>, <span class="fl">8.26471</span>, <span class="fl">6.94118</span>],</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"St. Gallen"</span>: [<span class="fl">13.6875</span>, <span class="fl">12.80206675</span>, <span class="fl">12.354183500000001</span>, <span class="fl">10.60418325</span>, <span class="fl">10.989583249999999</span>, <span class="fl">10.70831675</span>, <span class="fl">10.14581675</span>, <span class="fl">9.510415</span>, <span class="fl">7.37499825</span>, <span class="fl">2.97916825</span>],</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a><span class="co"># 带惩罚的贡献数据 (Figure 2A)</span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>data_with_punishment <span class="op">=</span> {</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Period"</span>: [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>],</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Copenhagen"</span>: [<span class="fl">15.411765098571777</span>, <span class="fl">16.97058868408203</span>, <span class="fl">17.735294342041016</span>, <span class="fl">18.16176414489746</span>, <span class="fl">18.367647171020508</span>, <span class="fl">18.691177368164062</span>, <span class="fl">18.735294342041016</span>, <span class="fl">18.323530197143555</span>, <span class="fl">18.073530197143555</span>, <span class="fl">17.014705657958984</span>],</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Dnipropetrovs’k"</span>: [<span class="fl">9.477272987365723</span>, <span class="fl">9.909090995788574</span>, <span class="fl">11.840909004211426</span>, <span class="fl">11.454545021057129</span>, <span class="fl">12.681818008422852</span>, <span class="fl">11.75</span>, <span class="fl">11.227272987365723</span>, <span class="fl">10.681818008422852</span>, <span class="fl">9.704545021057129</span>, <span class="fl">10.068181991577148</span>],</span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Minsk"</span>: [<span class="fl">11.75</span>, <span class="fl">13.235294342041016</span>, <span class="fl">12.897058486938477</span>, <span class="fl">13.382352828979492</span>, <span class="fl">13.970588684082031</span>, <span class="fl">13.014705657958984</span>, <span class="fl">13.176470756530762</span>, <span class="fl">13.691176414489746</span>, <span class="fl">12.411765098571777</span>, <span class="fl">11.70588207244873</span>],</span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>    <span class="st">"St. Gallen"</span>: [<span class="fl">15.041666984558105</span>, <span class="fl">16.71875</span>, <span class="fl">17.57291603088379</span>, <span class="fl">17.42708396911621</span>, <span class="fl">17.64583396911621</span>, <span class="fl">17.34375</span>, <span class="fl">16.79166603088379</span>, <span class="fl">16.75</span>, <span class="fl">16.88541603088379</span>, <span class="fl">15.15625</span>],</span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a><span class="co"># 转换为DataFrame</span></span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>df_without_punishment <span class="op">=</span> pd.DataFrame(data_without_punishment)</span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>df_with_punishment <span class="op">=</span> pd.DataFrame(data_with_punishment)</span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a><span class="co"># 提取第1期和第10期数据</span></span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a>data_without_punishment_period1 <span class="op">=</span> df_without_punishment.iloc[<span class="dv">0</span>, <span class="dv">1</span>:]</span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a>data_without_punishment_period10 <span class="op">=</span> df_without_punishment.iloc[<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>:]</span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-31"><a href="#cb21-31" aria-hidden="true" tabindex="-1"></a>data_with_punishment_period1 <span class="op">=</span> df_with_punishment.iloc[<span class="dv">0</span>, <span class="dv">1</span>:]</span>
<span id="cb21-32"><a href="#cb21-32" aria-hidden="true" tabindex="-1"></a>data_with_punishment_period10 <span class="op">=</span> df_with_punishment.iloc[<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>:]</span>
<span id="cb21-33"><a href="#cb21-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-34"><a href="#cb21-34" aria-hidden="true" tabindex="-1"></a><span class="co"># 定义函数计算统计量</span></span>
<span id="cb21-35"><a href="#cb21-35" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> summary_statistics(data):</span>
<span id="cb21-36"><a href="#cb21-36" aria-hidden="true" tabindex="-1"></a>    mean <span class="op">=</span> data.mean()</span>
<span id="cb21-37"><a href="#cb21-37" aria-hidden="true" tabindex="-1"></a>    variance <span class="op">=</span> data.var(ddof<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb21-38"><a href="#cb21-38" aria-hidden="true" tabindex="-1"></a>    std_dev <span class="op">=</span> data.std(ddof<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb21-39"><a href="#cb21-39" aria-hidden="true" tabindex="-1"></a>    minimum <span class="op">=</span> data.<span class="bu">min</span>()</span>
<span id="cb21-40"><a href="#cb21-40" aria-hidden="true" tabindex="-1"></a>    maximum <span class="op">=</span> data.<span class="bu">max</span>()</span>
<span id="cb21-41"><a href="#cb21-41" aria-hidden="true" tabindex="-1"></a>    data_range <span class="op">=</span> maximum <span class="op">-</span> minimum</span>
<span id="cb21-42"><a href="#cb21-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [mean, variance, std_dev, minimum, maximum, data_range]</span>
<span id="cb21-43"><a href="#cb21-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-44"><a href="#cb21-44" aria-hidden="true" tabindex="-1"></a><span class="co"># 计算统计量</span></span>
<span id="cb21-45"><a href="#cb21-45" aria-hidden="true" tabindex="-1"></a>summary_without_punishment_period1 <span class="op">=</span> summary_statistics(data_without_punishment_period1)</span>
<span id="cb21-46"><a href="#cb21-46" aria-hidden="true" tabindex="-1"></a>summary_without_punishment_period10 <span class="op">=</span> summary_statistics(data_without_punishment_period10)</span>
<span id="cb21-47"><a href="#cb21-47" aria-hidden="true" tabindex="-1"></a>summary_with_punishment_period1 <span class="op">=</span> summary_statistics(data_with_punishment_period1)</span>
<span id="cb21-48"><a href="#cb21-48" aria-hidden="true" tabindex="-1"></a>summary_with_punishment_period10 <span class="op">=</span> summary_statistics(data_with_punishment_period10)</span>
<span id="cb21-49"><a href="#cb21-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-50"><a href="#cb21-50" aria-hidden="true" tabindex="-1"></a><span class="co"># 创建汇总统计表</span></span>
<span id="cb21-51"><a href="#cb21-51" aria-hidden="true" tabindex="-1"></a>summary_table <span class="op">=</span> pd.DataFrame(</span>
<span id="cb21-52"><a href="#cb21-52" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb21-53"><a href="#cb21-53" aria-hidden="true" tabindex="-1"></a>        <span class="st">"不带惩罚 - 第1期"</span>: summary_without_punishment_period1,</span>
<span id="cb21-54"><a href="#cb21-54" aria-hidden="true" tabindex="-1"></a>        <span class="st">"不带惩罚 - 第10期"</span>: summary_without_punishment_period10,</span>
<span id="cb21-55"><a href="#cb21-55" aria-hidden="true" tabindex="-1"></a>        <span class="st">"带惩罚 - 第1期"</span>: summary_with_punishment_period1,</span>
<span id="cb21-56"><a href="#cb21-56" aria-hidden="true" tabindex="-1"></a>        <span class="st">"带惩罚 - 第10期"</span>: summary_with_punishment_period10,</span>
<span id="cb21-57"><a href="#cb21-57" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb21-58"><a href="#cb21-58" aria-hidden="true" tabindex="-1"></a>    index<span class="op">=</span>[<span class="st">"平均值 (Mean)"</span>, <span class="st">"方差 (Variance)"</span>, <span class="st">"标准差 (Std Dev)"</span>, <span class="st">"最小值 (Min)"</span>, <span class="st">"最大值 (Max)"</span>, <span class="st">"范围 (Range)"</span>],</span>
<span id="cb21-59"><a href="#cb21-59" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-60"><a href="#cb21-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-61"><a href="#cb21-61" aria-hidden="true" tabindex="-1"></a><span class="co"># 输出汇总统计表</span></span>
<span id="cb21-62"><a href="#cb21-62" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(summary_table)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               不带惩罚 - 第1期  不带惩罚 - 第10期  带惩罚 - 第1期  带惩罚 - 第10期
平均值 (Mean)      12.884772     5.974071  12.920176   13.486255
方差 (Variance)    1.954102     5.899658   7.977211   10.030599
标准差 (Std Dev)    1.397892     2.428921   2.824396    3.167112
最小值 (Min)       10.954545     2.979168   9.477273   10.068182
最大值 (Max)       14.102941     8.681818  15.411765   17.014706
范围 (Range)       3.148396     5.702650   5.934492    6.946524</code></pre>
</div>
</div></div>
<div id="cell-25" class="cell markdown">
<p>Part 2.3 How did changing the rules of the game affect behaviour?</p>
</div>
<div id="cell-26" class="cell markdown">
<p>You can conduct another experiment to understand why we might see differences in behaviour that are due to chance. First, flip a coin six times, using one hand only, and record the results (for example, Heads, Heads, Tails, etc.). Then, using the same hand, flip a coin six times and record the results again. Compare the outcomes from Question 1(a). Did you get the same number of heads in both cases? Even if you did, was the sequence of the outcomes (for example, Heads, Tails, Tails …) the same in both cases?</p>
</div>
<div id="cell-27" class="cell markdown">
<p>python 2.7 演练</p>
</div>
<div class="cell-container"><div class="cell-decorator"><pre>In [14]:</pre></div><div id="cell-28" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>funcs_to_apply <span class="op">=</span> [range_function, <span class="st">"max"</span>, <span class="st">"min"</span>, <span class="st">"std"</span>, <span class="st">"mean"</span>]</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>summ_p <span class="op">=</span> data_p.<span class="bu">apply</span>(funcs_to_apply, axis<span class="op">=</span><span class="dv">1</span>).rename(columns<span class="op">=</span>{<span class="st">"&lt;lambda&gt;"</span>: <span class="st">"range"</span>})</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>summ_n <span class="op">=</span> data_n.<span class="bu">apply</span>(funcs_to_apply, axis<span class="op">=</span><span class="dv">1</span>).rename(columns<span class="op">=</span>{<span class="st">"&lt;lambda&gt;"</span>: <span class="st">"range"</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg ansi-bold">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg ansi-bold">NameError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg ansi-bold">In[14], line 1</span>
<span class="ansi-green-fg ansi-bold">----&gt; 1</span> funcs_to_apply <span style="color:rgb(98,98,98)">=</span> [<span class="ansi-yellow-bg">range_function</span>, <span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">max</span><span style="color:rgb(175,0,0)">"</span>, <span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">min</span><span style="color:rgb(175,0,0)">"</span>, <span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">std</span><span style="color:rgb(175,0,0)">"</span>, <span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">mean</span><span style="color:rgb(175,0,0)">"</span>]
<span class="ansi-green-fg">      2</span> summ_p <span style="color:rgb(98,98,98)">=</span> data_p<span style="color:rgb(98,98,98)">.</span>apply(funcs_to_apply, axis<span style="color:rgb(98,98,98)">=</span><span style="color:rgb(98,98,98)">1</span>)<span style="color:rgb(98,98,98)">.</span>rename(columns<span style="color:rgb(98,98,98)">=</span>{<span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">&lt;lambda&gt;</span><span style="color:rgb(175,0,0)">"</span>: <span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">range</span><span style="color:rgb(175,0,0)">"</span>})
<span class="ansi-green-fg">      3</span> summ_n <span style="color:rgb(98,98,98)">=</span> data_n<span style="color:rgb(98,98,98)">.</span>apply(funcs_to_apply, axis<span style="color:rgb(98,98,98)">=</span><span style="color:rgb(98,98,98)">1</span>)<span style="color:rgb(98,98,98)">.</span>rename(columns<span style="color:rgb(98,98,98)">=</span>{<span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">&lt;lambda&gt;</span><span style="color:rgb(175,0,0)">"</span>: <span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">range</span><span style="color:rgb(175,0,0)">"</span>})

<span class="ansi-red-fg ansi-bold">NameError</span>: name 'range_function' is not defined</pre>
</div>
</div>
</div></div>
<div id="cell-29" class="cell markdown">
<p>Task2:Recreate the matplotlib plots using letsplot library</p>
</div>
<div id="cell-30" class="cell markdown">
<p>Take a line chart as an example,if we use matplotlib plots:</p>
</div>
<div class="cell-container"><div class="cell-decorator"><pre>In [1]:</pre></div><div id="cell-31" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>]</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> [<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">11</span>]</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>plt.plot(x, y)  <span class="co"># 绘制折线图</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'X-axis'</span>)  <span class="co"># 设置x轴标签</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Y-axis'</span>)  <span class="co"># 设置y轴标签</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Simple Line Plot'</span>)  <span class="co"># 设置图表标题</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>plt.show()  <span class="co"># 显示图表</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div class="">
<figure class="figure">
<p class=""><img src="practice_files/figure-html/cell-16-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div></div>
<div id="cell-32" class="cell markdown">
<p>if we use letsplot library</p>
</div>
<div class="cell-container"><div class="cell-decorator"><pre>In [5]:</pre></div><div id="cell-33" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>pip install lets_plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Requirement already satisfied: lets_plot in d:\python\lib\site-packages (4.5.1)
Requirement already satisfied: pypng in d:\python\lib\site-packages (from lets_plot) (0.20220715.0)
Requirement already satisfied: palettable in d:\python\lib\site-packages (from lets_plot) (3.3.3)
Note: you may need to restart the kernel to use updated packages.</code></pre>
</div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [10]:</pre></div><div id="cell-34" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> lets_plot <span class="im">import</span> lets_plot</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>lets_plot.plot(x<span class="op">=</span>x, y<span class="op">=</span>y, xlabel<span class="op">=</span><span class="st">'X-axis'</span>, ylabel<span class="op">=</span><span class="st">'Y-axis'</span>, title<span class="op">=</span><span class="st">'Simple Line Plot'</span>)</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 一行代码完成折线图的绘制、轴标签和标题的设置</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg ansi-bold">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg ansi-bold">ImportError</span>                               Traceback (most recent call last)
Cell <span class="ansi-green-fg ansi-bold">In[10], line 1</span>
<span class="ansi-green-fg ansi-bold">----&gt; 1</span> <span style="font-weight:bold;color:rgb(0,135,0)">from</span> <span style="font-weight:bold;color:rgb(0,0,255)">lets_plot</span> <span style="font-weight:bold;color:rgb(0,135,0)">import</span> lets_plot
<span class="ansi-green-fg">      3</span> lets_plot<span style="color:rgb(98,98,98)">.</span>plot(x<span style="color:rgb(98,98,98)">=</span>x, y<span style="color:rgb(98,98,98)">=</span>y, xlabel<span style="color:rgb(98,98,98)">=</span><span style="color:rgb(175,0,0)">'</span><span style="color:rgb(175,0,0)">X-axis</span><span style="color:rgb(175,0,0)">'</span>, ylabel<span style="color:rgb(98,98,98)">=</span><span style="color:rgb(175,0,0)">'</span><span style="color:rgb(175,0,0)">Y-axis</span><span style="color:rgb(175,0,0)">'</span>, title<span style="color:rgb(98,98,98)">=</span><span style="color:rgb(175,0,0)">'</span><span style="color:rgb(175,0,0)">Simple Line Plot</span><span style="color:rgb(175,0,0)">'</span>)
<span class="ansi-green-fg">      4</span> <span style="font-style:italic;color:rgb(95,135,135)"># 一行代码完成折线图的绘制、轴标签和标题的设置</span>

<span class="ansi-red-fg ansi-bold">ImportError</span>: cannot import name 'lets_plot' from 'lets_plot' (d:\python\Lib\site-packages\lets_plot\__init__.py)</pre>
</div>
</div>
</div></div>


     </main> <!-- /main -->  <script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>  </div> <!-- /content --> 
  
</body></html>